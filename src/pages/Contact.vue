<template>
  <layout>
    <v-sheet color="perl" width="70vw" height="100vh" class="mx-auto d-flex justify-space-around align-center">
      <v-sheet v-if="$vuetify.breakpoint.mdAndUp" class="d-flex justify-center align-center mr-6">
        <svg xmlns="http://www.w3.org/2000/svg" width="463.4" height="396.69" viewBox="0 0 576.499 493.5">
          <path
              d="M481.172,691.6c9.255-7.82,14.876-20.173,13.4-32.2s-10.605-23.082-22.449-25.636-25.345,4.516-28.943,16.085c-1.98-22.306-4.261-45.547-16.12-64.542-10.738-17.2-29.337-29.507-49.494-31.709s-41.38,6.114-53.951,22.024-15.649,39.039-6.845,57.3c6.486,13.456,18.436,23.47,30.956,31.616a199.787,199.787,0,0,0,136.641,29.893"
              transform="translate(-311.75 -203.25)" fill="#f2f2f2"/>
          <path
              d="M343.55,560.174A329.658,329.658,0,0,1,440.412,691.15c.924,2.264-2.753,3.25-3.666,1.011a326.267,326.267,0,0,0-95.884-129.3C338.963,561.317,341.667,558.641,343.55,560.174Z"
              transform="translate(-311.75 -203.25)" fill="#fff"/>
          <path
              d="M487.565,691.6c-9.255-7.82-14.876-20.173-13.4-32.2s10.605-23.082,22.449-25.636,25.345,4.516,28.943,16.085c1.98-22.306,4.261-45.547,16.12-64.542,10.738-17.2,29.337-29.507,49.494-31.709s41.38,6.114,53.951,22.024,15.649,39.039,6.845,57.3c-6.486,13.456-18.436,23.47-30.956,31.616a199.786,199.786,0,0,1-136.641,29.893"
              transform="translate(-311.75 -203.25)" fill="#f2f2f2"/>
          <path
              d="M625.187,560.174A329.657,329.657,0,0,0,528.325,691.15c-.924,2.264,2.752,3.25,3.666,1.011a325.988,325.988,0,0,1,95.885-129.3c1.9-1.545-.806-4.221-2.688-2.688Z"
              transform="translate(-311.75 -203.25)" fill="#fff"/>
          <circle cx="31" cy="31" r="31" transform="translate(172.277 160)" fill="#f2f2f2"/>
          <path
              d="M419.446,287.388H633.027v11.685H446.711a83.418,83.418,0,0,0-83.419,83.419V515.25h-23.37a3.9,3.9,0,0,1-3.9-3.895V370.806a83.418,83.418,0,0,1,83.419-83.418Z"
              transform="translate(-311.75 -203.25)" fill="#f2f2f2"/>
          <path d="M460.527,692.25V514.75h52v177.5a4.505,4.505,0,0,1-4.5,4.5h-43A4.505,4.505,0,0,1,460.527,692.25Z"
                transform="translate(-311.75 -203.25)" fill="#3f3d56"/>
          <path
              d="M325.027,511.25V366.916a86.763,86.763,0,0,1,86.665-86.666H632.027v236h-302a5.006,5.006,0,0,1-5-5Zm305-229H411.692a84.761,84.761,0,0,0-84.665,84.666V511.25a3,3,0,0,0,3,3h300Z"
              transform="translate(-311.75 -203.25)" fill="#3f3d56"/>
          <path
              d="M515.027,410.25a18.02,18.02,0,0,1-18-18v-129a3,3,0,0,0-3-3h-70a5.006,5.006,0,0,1-5-5v-47a5.006,5.006,0,0,1,5-5h104a5.006,5.006,0,0,1,5,5v184a18.02,18.02,0,0,1-18,18Z"
              transform="translate(-311.75 -203.25)" fill="#5ac985"/>
          <path
              d="M640.027,278.25h0a56.881,56.881,0,0,1,57,56.761v164.31h112a16.965,16.965,0,0,1,17,16.929h-243V335.011A56.881,56.881,0,0,1,640.027,278.25Z"
              transform="translate(-311.75 -203.25)" fill="#3f3d56"/>
          <path
              d="M626.349,371.818l11.8,48.756,230.881-55.892-11.8-48.756a3.638,3.638,0,0,0-2.358-2.6,3.6,3.6,0,0,0-1.334-.2l-133.459-69.1a3.682,3.682,0,0,0-4.656,1.119L651.1,334.841l-24.248,33.823a.514.514,0,0,0-.089.418,3.642,3.642,0,0,0-.417,2.735Z"
              transform="translate(-311.75 -203.25)" fill="#fff"/>
          <path
              d="M626.766,369.082a.49.49,0,0,0,.2.316.559.559,0,0,0,.433.086.536.536,0,0,0,.3-.207l.083-.115,1.263-1.766,22.929-31.964,64.3-89.673a2.62,2.62,0,0,1,3.322-.8l132.425,68.567,1.188.617a1.3,1.3,0,0,0,.147.052,1.616,1.616,0,0,1,.271-.026.514.514,0,0,0,.29-.245.524.524,0,0,0-.219-.709l-.164-.087-133.459-69.1a3.682,3.682,0,0,0-4.656,1.119L651.1,334.841l-24.248,33.823A.514.514,0,0,0,626.766,369.082Z"
              transform="translate(-311.75 -203.25)" fill="#3f3d56"/>
          <path
              d="M696.107,374.054l5.139.57,38.143,4.225,25.286,2.8,1.494.166,31.552-24.645,1.209-.944,7.452-5.82L832.9,329.7l.159-1.454,9.43-85.114a4.454,4.454,0,0,0-3.929-4.911L712.7,224.278a4.456,4.456,0,0,0-4.912,3.929l-6.65,60.038-3.689,33.286-3.3,29.778-1.53,13.829-.446,4.006a4.457,4.457,0,0,0,3.934,4.91Z"
              transform="translate(-311.75 -203.25)" fill="#e6e6e6"/>
          <path
              d="M730.692,299.448l54.517,6.038,19.334,2.141a6.54,6.54,0,1,0,1.44-13l-24.047-2.663-49.8-5.522a6.543,6.543,0,0,0-1.444,13.006Z"
              transform="translate(-311.75 -203.25)" fill="#fff"/>
          <path
              d="M727.588,323.564c.141.025.281.05.425.064l63.285,7.011,10.566,1.173a6.542,6.542,0,1,0,1.439-13.005l-15.278-1.69-50.13-5.555-8.436-.935a6.539,6.539,0,0,0-1.87,12.937Z"
              transform="translate(-311.75 -203.25)" fill="#fff"/>
          <path
              d="M720.426,344.948a6.539,6.539,0,0,0,4.88,3.125l25.939,2.873,46.2,5.118.01,0,1.477.165,7.452-5.82a6.466,6.466,0,0,0,0-1.33,6.555,6.555,0,0,0-5.787-5.824l-6.417-.713-25.457-2.817L750.4,337.69l-23.66-2.622a6.54,6.54,0,0,0-6.319,9.879Z"
              transform="translate(-311.75 -203.25)" fill="#fff"/>
          <path
              d="M756.859,269.97l13.564,1.5,5.991.665,9.05,1a6.542,6.542,0,0,0,1.439-13.005l-28.6-3.165a6.541,6.541,0,1,0-1.445,13Z"
              transform="translate(-311.75 -203.25)" fill="#fff"/>
          <path
              d="M645.944,306.182,662.481,374.5l27.6,5.248,25.532,4.861,27.394,5.212,8.753,1.666a3.673,3.673,0,0,0,2.94-.712l7.022-5.484,4.446-3.472,31.552-24.645L777.659,274.3a4.4,4.4,0,0,0-1.244-2.159,4.449,4.449,0,0,0-4.125-1.117L649.22,300.813A4.45,4.45,0,0,0,645.944,306.182Z"
              transform="translate(-311.75 -203.25)" fill="#23c2a8"/>
          <path
              d="M683.864,360.528a6.546,6.546,0,0,0,7.9,4.818l72.214-17.482a6.55,6.55,0,0,0,4.818-7.9,2.1,2.1,0,0,0-.07-.247,6.539,6.539,0,0,0-7.825-4.571l-72.214,17.482a6.546,6.546,0,0,0-4.818,7.9Z"
              transform="translate(-311.75 -203.25)" fill="#fff"/>
          <path
              d="M690.082,379.744l25.532,4.861L769.7,371.512a6.541,6.541,0,0,0-3.078-12.714L694.407,376.28a6.494,6.494,0,0,0-3.747,2.511,6.588,6.588,0,0,0-.577.953Z"
              transform="translate(-311.75 -203.25)" fill="#fff"/>
          <path d="M743.008,389.817l8.753,1.666a3.673,3.673,0,0,0,2.94-.712l7.022-5.484Z"
                transform="translate(-311.75 -203.25)" fill="#fff"/>
          <path
              d="M698.415,323.9a6.546,6.546,0,0,0,7.9,4.818l27.97-6.771a6.55,6.55,0,0,0,4.818-7.9,6.466,6.466,0,0,0-1.2-2.486,6.545,6.545,0,0,0-6.691-2.332L703.233,316a6.541,6.541,0,0,0-4.818,7.9Z"
              transform="translate(-311.75 -203.25)" fill="#fff"/>
          <path
              d="M715.612,384.6l27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.635,2.635,0,0,1-2.1.508l-6.479-1.232-27.4-5.214Zm81.838-28.539.267,1.1,1.215-.945ZM715.612,384.6l27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.635,2.635,0,0,1-2.1.508l-6.479-1.232-27.4-5.214Zm0,0,27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.635,2.635,0,0,1-2.1.508l-6.479-1.232-27.4-5.214Zm-89.263-12.787,30.916,127.71a3.667,3.667,0,0,0,4.422,2.7l223.761-54.168a3.666,3.666,0,0,0,2.7-4.422L857.23,315.926a3.638,3.638,0,0,0-2.358-2.6,3.594,3.594,0,0,0-1.334-.2,3.458,3.458,0,0,0-1.514.4,3.174,3.174,0,0,0-.607.377l-18.364,14.34-26.67,20.833-8.935,6.979,0,.008-.008,0-32.766,25.578-5.417,4.239-5.206,4.061a2.636,2.636,0,0,1-2.1.508l-6.479-1.232-27.4-5.214-27.422-5.216-60.061-11.43a3.59,3.59,0,0,0-1.547.033,3.67,3.67,0,0,0-1.788,1.036,4.115,4.115,0,0,0-.493.651A3.642,3.642,0,0,0,626.349,371.818ZM715.612,384.6l27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.635,2.635,0,0,1-2.1.508l-6.479-1.232-27.4-5.214Zm0,0,27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.635,2.635,0,0,1-2.1.508l-6.479-1.232-27.4-5.214Zm0,0,27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.635,2.635,0,0,1-2.1.508l-6.479-1.232-27.4-5.214Z"
              transform="translate(-311.75 -203.25)" fill="#fff"/>
          <path
              d="M715.612,384.6l27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.635,2.635,0,0,1-2.1.508l-6.479-1.232-27.4-5.214Zm81.838-28.539.267,1.1,1.215-.945ZM715.612,384.6l27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.635,2.635,0,0,1-2.1.508l-6.479-1.232-27.4-5.214Zm0,0,27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.635,2.635,0,0,1-2.1.508l-6.479-1.232-27.4-5.214Zm-87.827-15.443.136.1c.023-.037.062-.071.092-.11a2.643,2.643,0,0,1,2.385-.768l59.686,11.354,25.528,4.865,27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.636,2.636,0,0,1-2.1.508l-6.479-1.232-27.4-5.214-27.422-5.216-60.061-11.43a3.59,3.59,0,0,0-1.547.033Zm-1.436,2.657,30.916,127.71a3.667,3.667,0,0,0,4.422,2.7l223.761-54.168a3.666,3.666,0,0,0,2.7-4.422L857.23,315.926a3.638,3.638,0,0,0-2.358-2.6,3.594,3.594,0,0,0-1.334-.2,3.458,3.458,0,0,0-1.514.4,3.174,3.174,0,0,0-.607.377l-18.364,14.34-26.67,20.833-8.935,6.979,0,.008-.008,0-32.766,25.578-5.417,4.239-5.206,4.061a2.636,2.636,0,0,1-2.1.508l-6.479-1.232-27.4-5.214-27.422-5.216-60.061-11.43a3.59,3.59,0,0,0-1.547.033,3.67,3.67,0,0,0-1.788,1.036,4.115,4.115,0,0,0-.493.651,3.642,3.642,0,0,0-.417,2.735Zm1.02-.247a2.6,2.6,0,0,1,.461-2.191.341.341,0,0,1,.091-.117c.023-.037.062-.071.092-.11a2.643,2.643,0,0,1,2.385-.768l59.686,11.354,25.528,4.865,27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486,4.444-3.472,31.547-24.648,1.215-.945,7.447-5.817L832.9,329.7l19.171-14.972a2.6,2.6,0,0,1,.987-.477,2,2,0,0,1,.305-.05,1.609,1.609,0,0,1,.271-.026,2.679,2.679,0,0,1,.9.147,2.625,2.625,0,0,1,1.686,1.853l30.916,127.71a2.62,2.62,0,0,1-1.931,3.165L661.442,501.214a2.618,2.618,0,0,1-3.157-1.933ZM715.612,384.6l27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.635,2.635,0,0,1-2.1.508l-6.479-1.232-27.4-5.214Zm0,0,27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.635,2.635,0,0,1-2.1.508l-6.479-1.232-27.4-5.214Zm0,0,27.4,5.214,8.75,1.666a3.689,3.689,0,0,0,2.938-.711l7.027-5.486-2.466.6-5.206,4.061a2.635,2.635,0,0,1-2.1.508l-6.479-1.232-27.4-5.214Z"
              transform="translate(-311.75 -203.25)" fill="#3f3d56"/>
          <path
              d="M827.129,422.967a8.128,8.128,0,0,1,5.981-9.8l28.242-6.837a8.119,8.119,0,1,1,3.82,15.782l-28.242,6.837A8.128,8.128,0,0,1,827.129,422.967Z"
              transform="translate(-311.75 -203.25)" fill="#71cc76"/>
          <circle cx="7" cy="7" r="7" transform="translate(196.277 182)" fill="#fff"/>
        </svg>
      </v-sheet>
      <div class="bgImg">
        <h6 class="display-1 mb-6 font-weight-bold d-flex justify-center">Get in touch</h6>
        <v-form
            v-on:submit.prevent="handleSubmit"
            name="contact" method="POST" data-netlify="true"
            data-netlify-honeypot="bot-field"
            ref="form"
            v-model="valid"
            lazy-validation
        >
          <input type="hidden" name="form-name" value="contact"/>
          <p hidden>
            <label>
              Don’t fill this out: <input name="bot-field" />
            </label>
          </p>
          <v-text-field
              v-model="formData.name"
              :rules="nameRules"
              label="Name"
              filled
              rounded
          ></v-text-field>

          <v-text-field
              v-model="formData.email"
              :rules="emailRules"
              label="E-mail"
              required
              filled
              rounded
          ></v-text-field>

          <v-text-field
              v-model="formData.subject"
              label="Subject"
              filled
              rounded
          ></v-text-field>

          <v-textarea
              v-model="formData.message"
              :rules="[v => !!v || 'Message is required']"
              label="Message"
              required
              filled
              rounded
          ></v-textarea>
          <div class="d-flex justify-space-around align-center flex-column flex-sm-row">
            <v-btn
                :disabled="!valid"
                color="success"
                class="mr-4 mb-4 mb-md-0"
                type="submit"
            >
              Send
            </v-btn>

            <v-btn
                color="error"
                class="mr-4 mb-4 mb-md-0"
                @click="reset"
            >
              Reset Form
            </v-btn>

            <v-btn
                class=""
                color="warning"
                @click="resetValidation"
            >
              Reset Validation
            </v-btn>
            <div class="hidden" data-netlify-recaptcha="true"></div>
          </div>
        </v-form>
      </div>
    </v-sheet>
  </layout>
</template>

<script>
export default {
  name: "Contact",
  data() {
    return {
      formData: {
        name : '',
        email: '',
        message: '',
        subject: '',
      },
      valid: true,
      name: '',
      nameRules: [
        v => !!v || 'Name is required',
        v => (v && v.length <= 10) || 'Name must be less than 10 characters',
      ],
      email: '',
      emailRules: [
        v => !!v || 'E-mail is required',
        v => /.+@.+\..+/.test(v) || 'E-mail must be valid',
      ],
    }
  },

  methods: {
    validate() {
      this.$refs.form.validate()
    },
    reset() {
      this.$refs.form.reset()
    },
    resetValidation() {
      this.$refs.form.resetValidation()
    },
    encode(data) {
      return Object.keys(data)
          .map(key => encodeURIComponent(key) + '=' + encodeURIComponent(data[key]))
          .join('&')
    },
    handleSubmit(e) {
      fetch('/', {
        method: 'POST',
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        body: this.encode({
          'form-name': e.target.getAttribute('name'),
          ...this.formData,
        }),
      })
          .then(() => this.$router.push('/' + this.$context.locale.slice(0, 2) + '/success'))
          .catch(error => alert(error))
    }
  },
}
</script>

<style scoped>

</style>
